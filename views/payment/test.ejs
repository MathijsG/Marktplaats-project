<% include ../partials/header %>
<form id="payment-form">
  <div class="form-bla">
    <label for="name">
      Volledige naam:
    </label>
    <input id="name" name="name" placeholder="Jenny Rosen" required class="form-control">
  </div>

  <div class="form-2">
    <label for="ideal-bank-element">
      Kies hieronder uw bank:
    </label>
    <div id="ideal-bank-element">
      <!-- A Stripe Element will be inserted here. -->
    </div>
  </div>

  <button class="rounded p-2 btn btn-primary" data-secret="<%=client_secret%>">Doe betaling</button>

  <!-- Used to display form errors. -->
  <div id="error-message" role="alert"></div>
</form>
<script>
  const stripe = Stripe('pk_test_nGMHwCRhhiEskjG9nbZ8dXv000GNF0HPDN');
  const elements = stripe.elements();
  const options = {
    // Custom styling can be passed to options when creating an Element.
    style: {
      base: {
        // Add your base input styles here. For example:
        fontSize: '16px',
        color: '#32325d',
        padding: '10px 12px',
      },
    }
  }

  // Create an instance of the idealBank Element.
  const idealBank = elements.create('idealBank', options);

  // Add an instance of the idealBank Element into
  // the `ideal-bank-element` <div>.
  idealBank.mount('#ideal-bank-element');

  const form = document.getElementById('payment-form');

  form.addEventListener('submit', (event) =>
  {
    event.preventDefault();

    // Redirects away from the client
    const { error } =  stripe.confirmIdealPayment(
      '{{PAYMENT_INTENT_CLIENT_SECRET}}',
      {
        payment_method: {
          ideal: idealBank,
        },
        return_url: 'https://your-website.com/checkout/complete',
      }
    );
  });
</script>
<% include ../partials/footer %>
<% include ../partials/header %>

<!--Begin carousel  -->
<div class="row">
  <div class="col-lg-8">
    <% if (product.images.length > 0 ) { %>
    <div id="carousel">
      <div class="carousel slide overflow-hidden" data-ride="carousel">
        <div class="carousel-inner">
          <% product.images.forEach(function(image) { %>
          <div class="carousel-item">
            <img class="d-block w-100" src="/uploads/products/<%=image%>">
          </div>
          <% }); %>
        </div>
      </div>
    </div>
    <% } else { %>
    <img src="/images/product_placeholder.png" width="310" height="200">
    <% } %>
    <h1 class="card-title"><%=product.title%></h3>
      <h4>Prijs &euro;<%=product.price%></h4>
  </div>

  <!--Einde carousel  -->

  <% if (product.images.length > 0 ) { %>
  <div id="thumbnails" class="col justify-content-center">
    <div class="row d-flex justify-content-center">
      <% product.images.forEach(function(image) { %>
      <div class="col-6 card-deck">
        <div class="card rounded d-flex align-items-center justify-content-center p-2 m-1">
          <img class="cover thumbnail" src="/uploads/products/<%=image%>" width="100">
        </div>
      </div>
      <% }); %>
    </div>
  </div>
  <% } %>
</div>

<!--  -->

<div class="row">
  <div class="col-lg-8">
    <div class="text-justify">
      <%=product.body%>
    </div>
  </div>
  <div class="col-lg-4">
    <div class="card rounded shadow card-deck mb-2">
      <div class="card-body">
        <div class="card-title">
          <h5>Advertentiebeheer</h5>
        </div>
        <a class="btn btn-info d-inline p-2" href="/advertenties/<%=product.id%>/edit">Bewerken</a>
        <form action="/advertenties/<%=product.id%>?_method=DELETE" class="d-inline" method="POST"
          onclick="return confirm('Weet je zeker dat je <%=product.title%> wil verwijderen?')">
          <button class="btn btn-danger d-inline">Verwijderen</button>
        </form>
      </div>
    </div>
    <!-- location -->
    <div class="card rounded shadow card-deck mb-2">
      <div class="card-body">
        <div class="card-title">
          <h2>Advertentie-informatie</h2>
        </div>
        <div class="card-text">
          <iframe class="w-100" height="400"
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2389.7253106843777!2d6.55323841530882!3d53.20484239300268!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47c832b187723e0d%3A0x43183c976e240e21!2sLeonard%20Springerlaan%2035%2C%209727%20KB%20Groningen!5e0!3m2!1snl!2snl!4v1574416191281!5m2!1snl!2snl"
            frameborder="0" style="border:0;" allowfullscreen=""></iframe>
        </div>
      </div>
    </div>
    <div class="card rounded shadow card-deck mb-2">
      <div class="card-body">
        <div class="card-title">
          <h2>Biedt u mee?</h2>
        </div>
        <form action="/advertenties/<%=product._id%>/bids" method="POST">
          <input class="form-control" type="number" name="bid[amount]" id="bid" min="0" required>
          <span class="text-muted">Bieden vanaf &euro;<%=product.minprice%></span>
          <button class="btn btn-warning btn-block mt-2" type="submit">Bied</button>
        </form>
      </div>
    </div>
    <div class="card rounded shadow card-deck">
      <div class="card-body">
        <div class="card-title">
          <h3>Biedingsverloop</h3>
        </div>
        <% if (product.bids.length > 0) { %>
        <ul class="list-group list-group-flush">
          <% product.bids.forEach(function(bid){ %>
          <li class="list-group-item">
            <date><%=moment(bid.createdAt).format("DD MMM 'YY")%></date> - <strong>&euro;<%=bid.amount%></strong>
          </li>
          <% }) %>
        </ul>
        <% } else { %>
        <p class="text-muted">Er zijn nog geen biedingen geplaatst.</p>
        <% } %>
      </div>
    </div>
  </div>
</div>
<% include ../partials/footer %>